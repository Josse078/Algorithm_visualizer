<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Algorithm Visualizer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f9;
        }
        .container {
            text-align: center;
        }
        h1 {
            font-size: 2rem;
        }
        button {
            margin: 10px;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #array {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .bar {
            width: 30px;
            height: 100px;
            margin: 0 2px;
            background-color: #3498db;
            transition: all 0.5s ease;
        }
        .swapping {
            background-color: #e74c3c;
        }
        .sorted {
            background-color: #2ecc71;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sorting Algorithm Visualizer</h1>
        <button id="generateArrayBtn">Generate New Array</button>
        <button id="runBubbleSortBtn">Run Bubble Sort</button>
        <button id="runSelectionSortBtn">Run Selection Sort</button>
        <button id="runInsertionSortBtn">Run Insertion Sort</button>
        <button id="runMergeSortBtn">Run Merge Sort</button>
        <div id="array"></div>
    </div>
    <script>
        let array = [];
        const numBars = 50; 
        function generateRandomArray() {
            array = [];
            for (let i = 0; i < numBars; i++) {
                array.push(Math.floor(Math.random() * 100) + 10); 
            }
            visualizeArray();
        }
        function visualizeArray() {
            const arrayContainer = document.getElementById('array');
            arrayContainer.innerHTML = ''; 
            array.forEach((value) => {
                const bar = document.createElement('div');
                bar.classList.add('bar');
                bar.style.height = `${value * 3}px`; 
                arrayContainer.appendChild(bar);
            });
        }
        function swapBars(index1, index2) {
            const bars = document.getElementsByClassName('bar');
            const bar1 = bars[index1];
            const bar2 = bars[index2];
            const temp = bar1.style.height;
            bar1.style.height = bar2.style.height;
            bar2.style.height = temp;
            const tempValue = array[index1];
            array[index1] = array[index2];
            array[index2] = tempValue;
        }
        function updateBar(index, value) {
            const bar = document.getElementsByClassName('bar')[index];
            bar.style.height = `${value * 3}px`;
        }
        function isSorted() {
            for (let i = 0; i < array.length - 1; i++) {
                if (array[i] > array[i + 1]) return false;
            }
            return true;
        }
        async function markSorted() {
            const bars = document.getElementsByClassName('bar');
            for (let i = 0; i < array.length; i++) {
                bars[i].classList.add('sorted');
                await new Promise(resolve => setTimeout(resolve, 20));
            }
        }
        async function bubbleSort() {
            const bars = document.getElementsByClassName('bar');
            const n = array.length;
            while (!isSorted()) {
                for (let i = 0; i < n - 1; i++) {
                    bars[i].classList.add('swapping');
                    bars[i + 1].classList.add('swapping');
                    await new Promise(resolve => setTimeout(resolve, 50));
                    if (array[i] > array[i + 1]) {
                        const temp = array[i];
                        array[i] = array[i + 1];
                        array[i + 1] = temp;
                        updateBar(i, array[i]);
                        updateBar(i + 1, array[i + 1]);
                    }
                    bars[i].classList.remove('swapping');
                    bars[i + 1].classList.remove('swapping');
                }
            }
            await markSorted();
        }
        async function selectionSort() {
            const bars = document.getElementsByClassName('bar');
            const n = array.length;
            while (!isSorted()) {
                for (let i = 0; i < n - 1; i++) {
                    let minIdx = i;
                    bars[i].classList.add('swapping');
                    for (let j = i + 1; j < n; j++) {
                        bars[j].classList.add('swapping');
                        await new Promise(resolve => setTimeout(resolve, 50));
                        if (array[j] < array[minIdx]) {
                            minIdx = j;
                        }
                        bars[j].classList.remove('swapping');
                    }
                    if (minIdx !== i) {
                        const temp = array[i];
                        array[i] = array[minIdx];
                        array[minIdx] = temp;
                        updateBar(i, array[i]);
                        updateBar(minIdx, array[minIdx]);
                    }
                    bars[i].classList.remove('swapping');
                    bars[i].classList.add('sorted');
                }
            }
            await markSorted();
        }
        async function insertionSort() {
            const bars = document.getElementsByClassName('bar');
            const n = array.length;
            while (!isSorted()) {
                for (let i = 1; i < n; i++) {
                    let key = array[i];
                    let j = i - 1;
                    bars[i].classList.add('swapping');
                    await new Promise(resolve => setTimeout(resolve, 50));
                    while (j >= 0 && array[j] > key) {
                        bars[j].classList.add('swapping');
                        await new Promise(resolve => setTimeout(resolve, 50));
                        array[j + 1] = array[j];
                        updateBar(j + 1, array[j + 1]);
                        bars[j].classList.remove('swapping');
                        j--;
                    }
                    array[j + 1] = key;
                    updateBar(j + 1, key);
                    bars[i].classList.remove('swapping');
                }
            }
            await markSorted();
        }
        async function mergeSort() {
            const bars = document.getElementsByClassName('bar');
            const n = array.length;
            let isSorting = true;
            async function mergeSortHelper(array, left, right) {
                if (left < right) {
                    const mid = Math.floor((left + right) / 2);
                    await mergeSortHelper(array, left, mid);
                    await mergeSortHelper(array, mid + 1, right);
                    await merge(array, left, mid, right);
                }
            }
            async function merge(array, left, mid, right) {
                const n1 = mid - left + 1;
                const n2 = right - mid;
                const leftArr = new Array(n1);
                const rightArr = new Array(n2);
                for (let i = 0; i < n1; i++) {
                    leftArr[i] = array[left + i];
                }
                for (let j = 0; j < n2; j++) {
                    rightArr[j] = array[mid + 1 + j];
                }
                let i = 0, j = 0, k = left;
                while (i < n1 && j < n2) {
                    bars[k].classList.add('swapping');
                    if (k + 1 < bars.length) {
                        bars[k + 1].classList.add('swapping');
                    }
                    await new Promise(resolve => setTimeout(resolve, 50));
                    if (leftArr[i] <= rightArr[j]) {
                        array[k] = leftArr[i];
                        updateBar(k, leftArr[i]);
                        i++;
                    } else {
                        array[k] = rightArr[j];
                        updateBar(k, rightArr[j]);
                        j++;
                    }
                    bars[k].classList.remove('swapping');
                    if (k + 1 < bars.length) {
                        bars[k + 1].classList.remove('swapping');
                    }
                    k++;
                }
                while (i < n1) {
                    array[k] = leftArr[i];
                    updateBar(k, leftArr[i]);
                    i++;
                    k++;
                }
                while (j < n2) {
                    array[k] = rightArr[j];
                    updateBar(k, rightArr[j]);
                    j++;
                    k++;
                }
                
                for (let i = left; i <= right; i++) {
                    if (i < n - 1 && array[i] > array[i + 1]) {
                        return false;
                    }
                    bars[i].classList.add('sorted');
                }
                return true;
            }
            function updateBar(index, value) {
                const bar = bars[index];
                bar.style.height = `${value * 3}px`;
            }
            function isSorted() {
                for (let i = 0; i < array.length - 1; i++) {
                    if (array[i] > array[i + 1]) return false;
                }
                return true;
            }
          
            await mergeSortHelper(array, 0, n - 1);
          
            while (!isSorted()) {
                await mergeSortHelper(array, 0, n - 1);
            }
           
            for (let i = 0; i < n; i++) {
                bars[i].classList.add('sorted');
                await new Promise(resolve => setTimeout(resolve, 20));
            }
        }
        document.getElementById('generateArrayBtn').addEventListener('click', generateRandomArray);
        document.getElementById('runBubbleSortBtn').addEventListener('click', bubbleSort);
        document.getElementById('runSelectionSortBtn').addEventListener('click', selectionSort);
        document.getElementById('runInsertionSortBtn').addEventListener('click', insertionSort);
        document.getElementById('runMergeSortBtn').addEventListener('click', mergeSort);
        generateRandomArray();
    </script>
</body>
</html>