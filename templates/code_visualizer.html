<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data structure Visualizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/code_visualizer.css') }}">
</head>
<body>
    <h1>Data Structure Visualizer</h1>
    <div class="template-selector">
        <select id="algorithmSelect" onchange="loadAlgorithm()">
            <option value="">Select an Algorithm</option>
            <option value="bfs">1. Breadth-First Search (BFS)</option>
            <option value="dfs">2. Depth-First Search (DFS)</option>
            <option value="bubble">3. Bubble Sort</option>
            <option value="insertion">4. Insertion Sort</option>
            <option value="binary">5. Binary Search</option>
            <option value="fibonacci">6. Fibonacci Sequence</option>
            <option value="factorial">7. Factorial</option>
            <option value="knapsack">8. 0/1 Knapsack</option>
            <option value="example">Example Code (Queue & 2D Array)</option>
        </select>
    </div>
    <div class="editor-container">
        <button onclick="runCode()">Run Code</button>
        <textarea id="editor"></textarea>
    </div>
    <div id="output"></div>
    <div id="visualization-area"></div>
    <div class="execution-flow">
        <h3>Execution Flow</h3>
        <div class="execution-controls">
            <button class="nav-button" onclick="previousExecution()" id="prevExecution">← Previous</button>
            <span class="execution-step" id="executionStep">Step 0/0</span>
            <button class="nav-button" onclick="nextExecution()" id="nextExecution">Next →</button>
        </div>
        <div id="stackFrames"></div>
    </div>
    <div id="output"></div>
    <div class="performance-panel" id="performancePanel" style="display: none">
        <button class="minimize-button" onclick="togglePerformancePanel()">−</button>
        <h3>Performance Stats</h3>
        <div id="executionTime"></div>
        <div id="profileData"></div>
    </div>
    <div class="control-panel">
        <div class="speed-control">
            <span class="speed-label">Animation Speed:</span>
            <input type="range" id="animationSpeed" min="0.1" max="2" step="0.1" value="0.5">
            <span class="speed-value" id="speedValue">0.5s</span>
            <button class="speed-preset" onclick="setSpeed(0.1)">Fast</button>
            <button class="speed-preset" onclick="setSpeed(0.5)">Normal</button>
            <button class="speed-preset" onclick="setSpeed(1.0)">Slow</button>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/algorithms.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>